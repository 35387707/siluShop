
@{
    Layout = null;
}
@model List<RelexBarDLL.Category>
<!DOCTYPE html>

<html>
<head>
    @Html.Action("Header", "Static")
    <title>分类</title>
    <style>
        .cate_list li img {
            height: 7rem;
        }
    </style>
    @*<script>
            var Product = {};
            Product.key = "";
            function GetProductList(index) {
                Product.index = index;
                $.post("MobileProductList", "index=" + index + "&Category=" + Product.Category + "&pageSize=15&key="+Product.key, function (data) {
                    if (index == 1) {
                        $("#ProductList").html("");
                    }
                    if (data.length != 0) {
                        syncStatus = 1;
                        var temp = [];
                        for (var i = 0; i < data.length; i++) {
                            temp.push('<li><a href="/Shop/ProductDetail/'+data[i].ID+'" title=""><div class="pic"></div><img src="'+data[i].Img+'" alt=""><div class="title">'+data[i].Name+'</div></a></li>');
                        }
                        $("#ProductList").append(temp.join(""));

                    }
                }, "json")
            }
            function init() {
                Product.Category = $(".cate_nav ul li").eq(0).attr("data-v");
                GetProductList(1);
            }
            $(function () {
                $("#search").on("click", function () {
                    var key = $("#key").val();
                    Product.key = key;
                    GetProductList(1);
                });
                $(".cate_nav ul li").eq(0).addClass("active");
                $(".cate_nav ul li").on("click", function () {
                    $(".cate_nav ul li").removeClass("active");
                    $(this).addClass("active");
                    Product.Category = $(this).attr("data-v");
                    syncStatus = 1;
                    $("#ProductList").html("");
                    GetProductList(1);
                });
                init();
                syncTopStatus = 1;
                syncStatus = 1;
                $("body").on("touchstart", function (e) {
                    // e.preventDefault();
                    startX = e.originalEvent.changedTouches[0].pageX;
                    startY = e.originalEvent.changedTouches[0].pageY;

                });
                $("body").on("touchmove", function (e) {
                    endX = e.originalEvent.changedTouches[0].pageX;
                    endY = e.originalEvent.changedTouches[0].pageY;
                    var y = endY - startY;
                    if (Math.abs(y) > 100) {
                        var $list = $(".cate_nav");
                        var oldheight = $list[0].scrollHeight;
                        if (y > 0) {
                            if (syncTopStatus == 1 && $list[0].scrollTop == 0) {
                                syncTopStatus = 0;
                            }
                            //alert("向下");
                        } else {
                            if (syncStatus == 1 && $list.scrollTop() + window.innerHeight == $list[0].scrollHeight) {
                                syncStatus = 0;
                                GetProductList(++Product.index);
                            }
                            //alert("向上");
                        }
                    }
                });
            });
        </script>*@
    <script>
        $(function () {
            $("#search").on("click", function () {
                var key = $("#key").val();
                location.href = "/Shop/AllProductlist?id=" + encodeURIComponent(key);
            });
            $(".cate_nav ul li").eq(0).addClass("active");
            var cid = $(".cate_nav ul li").eq(0).attr("data-v");
            $('.cate_list ul').hide();
            $('#u_' + cid).show();
            $(".cate_nav ul li").on("click", function () {
                $(".cate_nav ul li").removeClass("active");
                $(this).addClass("active");

                $('.cate_list ul').hide();
                $('#u_' + $(this).attr("data-v")).show();
            });
        });
    </script>
</head>
<body class="bgf4f4f4">
    <div class="cate_search">
        <div class="cate_searchbox">
            <input type="text" id="key" class="cate_searchtxt" placeholder="搜索" style="color:black" />
            <span><input type="button" id="search" value="" /><i class="icon-search"></i></span>
        </div>
    </div>
    <div class="cate_nav">
        <ul>
            @foreach (var a in Model.Where(m => m.HeadID == 0))
            {
                <li data-v="@a.ID"><a title="" style="height:6rem;line-height:4rem">@a.Name</a></li>
            }
        </ul>
    </div>
    <div class="cate_list">
        <dl>
            <dd>
                @foreach (var a in Model.Where(m => m.HeadID == 0))
                {
                    <ul class="clearfix" id="u_@a.ID">
                        @foreach (var b in Model.Where(m => m.HeadID == a.ID))
                        {
                            <li>
                                <a href="/Shop/AllProductlist?cid=@b.ID">
                                    <div class="pic"></div>
                                    <img src="@b.SrcDetail" alt="">
                                    <div class="title">@b.Name</div>
                                </a>
                            </li>
                        }
                    </ul>
                }
            </dd>
        </dl>
    </div>
    <div class="footnav">
        @Html.Action("ShopFooter", "Static", new { id = 1 })
    </div>
</body>
</html>
